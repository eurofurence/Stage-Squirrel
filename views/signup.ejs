<% var title = 'Stage Squirrel - Signup'; %>
<% include ./partials/page-begin %>

<div class="col-sm-6 col-sm-offset-2">
    <h1>
        <span class="fa fa-sign-in"></span> Stage Squirrel - Signup
    </h1>
    <!-- show any messages that come back with authentication -->
    <% if (message.length > 0) { %>
        <div class="alert alert-danger"><%= message %></div>
    <% } %>
    <!-- LOGIN FORM -->
    <form class="js-signup-form" action="<%= locals.baseUrlInfo.pathname %>signup" method="post">
        <input type="hidden" name="auth_doubleoptin" value="<%= cfg['AUTH_DOUBLEOPTIN'].value %>" />
        <div class="form-group">
            <label>Username</label>
            <input type="text" class="form-control" name="userName" required />
        </div>
        <div class="form-group">
            <label>Email</label>
            <input type="email" class="form-control" name="email" required title="Enter a valid mail address" />
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" name="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required title="Password must contain at least 8 characters, including UPPER/lowercase and numbers" />
        </div>
        <% if (cfg["AUTH_DOUBLEOPTIN"].value == 1) { %>
            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" class="form-control" name="password2" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required title="Please enter the same Password as above" />
            </div>
        <% } %>
        <div class="form-group">
            <label>Userrole</label>
            <select name="userrole" multiple class="chosen-select" required>
                <option value="0">Choose your Role</option>
                <% for (role of roles) { %>
                    <option value="<%= role.role_id %>" title="<%= role.role_description %>">
                        <%= role.role_title %>
                    </option>
                <% } %>
            </select>
        </div>
        <button type="submit" class="btn btn-primary btn-lg" id="validate">Signup</button>
    </form>
    <hr>
    <p>Already have an account? <a href="<%= locals.baseUrlInfo.pathname %>login">Login</a></p>
</div>
<div class="col-sm-2" id="sq-logo">
	<img src="<%= locals.baseUrlInfo.pathname %>images/sq-logo.png">
</div>

<% include ./partials/page-end %>